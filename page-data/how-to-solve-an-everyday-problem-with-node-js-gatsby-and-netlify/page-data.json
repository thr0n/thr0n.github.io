{"componentChunkName":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx","path":"/how-to-solve-an-everyday-problem-with-node-js-gatsby-and-netlify","result":{"data":{"post":{"__typename":"MdxPost","slug":"/how-to-solve-an-everyday-problem-with-node-js-gatsby-and-netlify","title":"How to solve an everyday problem with Node.js, Gatsby and Netlify","date":"25.02.2021","tags":[{"name":"React","slug":"react"},{"name":"Gatsby.js","slug":"gatsby-js"},{"name":"JAM Stack","slug":"jam-stack"},{"name":"APIs","slug":"ap-is"}],"description":"...","canonicalUrl":null,"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How to solve an everyday problem with Node.js, Gatsby and Netlify\",\n  \"date\": \"2021-02-25T00:00:00.000Z\",\n  \"description\": \"...\",\n  \"tags\": [\"React\", \"Gatsby.js\", \"JAM Stack\", \"APIs\"],\n  \"banner\": \"./tapes.jpg\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"I really love audio dramas, especially \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Die drei ???\"), \" (\\\"Three Investigators\\\").\\nAnd I'm not alone with that. The series has now been in production since 1979 and there are now over 200 episodes, Christmas specials,\\nmerchandise, etc. Over fifty million records have been sold so far. So there are a lot of people out there who also like to listen to\\nthem as much as I do (or even more).\"), mdx(\"p\", null, \"In addition, of course, there are a variety of other series. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"TKKG\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"F\\xFCnf Freunde\"), \", \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Point Whitmark\"), \", just to name a few.\\nBut \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Die drei ???\"), \" is still my all-time favorite. I found a good article on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.fluentu.com/blog/german/german-dramas/\"\n  }, \"Fluentu.com\"), \"\\nthat will give you an overview of the topic if you're more interested.\"), mdx(\"p\", null, \"Thanks to Spotify I have access to an almost endless number of audio dramas. Nevertheless, it is often difficult to find an episode that\\nfits my mood or situation. That's why I often ask my wife for a random episode ID. Unfortunately, my wife is not a good randomizer. When I ask her\\nfor an episode ID, she answers \\\"73!\\\" most of the time \\uD83D\\uDE09. But episode #73 of \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Die drei ???\"), \" is \\\"Poltergeist\\\" which is not a good episode if you\\nwant to listen to something relaxing while you try to fall asleep \\uD83D\\uDC7B \\uD83D\\uDE31\"), mdx(\"p\", null, \"So, there was only one way out: I had to build my personal random episode generator. I was aware that this one will sometimes make\\ninappropriate suggestions to me, but I was hoping that the poltergeist would be suggested to me less often.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"56.25%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAMBAv/aAAwDAQACEAMQAAABe3PaLVkRM//EABsQAAICAwEAAAAAAAAAAAAAAAABERICAyEi/9oACAEBAAEFAqayuJ5RPZcM/8QAFhEBAQEAAAAAAAAAAAAAAAAAARBR/9oACAEDAQE/AUdn/8QAFhEAAwAAAAAAAAAAAAAAAAAAECFR/9oACAECAQE/AVB//8QAFhAAAwAAAAAAAAAAAAAAAAAAIDGh/9oACAEBAAY/AlS//8QAGxABAAIDAQEAAAAAAAAAAAAAAQARMUGRIbH/2gAIAQEAAT8hCwuoab7G6n7BC9huTLL2f//aAAwDAQACAAMAAAAQ7N//xAAYEQACAwAAAAAAAAAAAAAAAAAAARFBUf/aAAgBAwEBPxBmxD1n/8QAGBEBAQADAAAAAAAAAAAAAAAAAQAhQVH/2gAIAQIBAT8QXYWOF//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFBUbHh/9oACAEBAAE/ELlq5z6TLBtvGkkR5QYEBq5XN7bjb9if/9k=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Choices are hard\",\n    \"title\": \"Choices are hard\",\n    \"src\": \"/static/b0b1afa99637f48ba916f7336e943117/18e3b/choices.jpg\",\n    \"srcSet\": [\"/static/b0b1afa99637f48ba916f7336e943117/46946/choices.jpg 240w\", \"/static/b0b1afa99637f48ba916f7336e943117/55489/choices.jpg 480w\", \"/static/b0b1afa99637f48ba916f7336e943117/18e3b/choices.jpg 960w\", \"/static/b0b1afa99637f48ba916f7336e943117/60e21/choices.jpg 1440w\", \"/static/b0b1afa99637f48ba916f7336e943117/bd880/choices.jpg 1778w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(UnsplashAttribution, {\n    photographer: {\n      name: 'Clay Banks',\n      url: 'https://unsplash.com/@claybanks'\n    },\n    mdxType: \"UnsplashAttribution\"\n  }), mdx(\"h2\", null, \"Exploring possible solutions\"), mdx(\"p\", null, \"To be honest, I started this project about two and a half years ago, kept discarding ideas and starting over again.\\nI have gone down  many different paths to find a solution that fits my needs. First, I wanted to use Clojure for a\\nsmall backend application and React to implement the frontend.\\nI also made it to crawl Wikipedia for episode titles and parse that information and fit it into a simple database schema.\\nBut after a few days, I lost focus on this rather complicated  approach. There was a gap between the episode suggestion\\nand the play button to start playback. Why should I use a suggestion application if I have to type this suggestion into Spotify\\nby hand afterwards? Or even worse: If I would then have to search for the episode for a long time in a CD collection?\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEC/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB2haEE//EABgQAQEAAwAAAAAAAAAAAAAAAAEAECEx/9oACAEBAAEFAp1gZ7f/xAAWEQADAAAAAAAAAAAAAAAAAAAAARP/2gAIAQMBAT8BkiaP/8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQIBAT8Btb//xAAXEAADAQAAAAAAAAAAAAAAAAAAARAh/9oACAEBAAY/AhZVP//EABwQAQACAgMBAAAAAAAAAAAAAAEAESFBEFFhkf/aAAgBAQABPyEBlELW+ROJ3kd7mOn7P//aAAwDAQACAAMAAAAQkP8A/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/EJBX/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEx/9oACAECAQE/ENrf/8QAGxAAAgMBAQEAAAAAAAAAAAAAAAERITFxgbH/2gAIAQEAAT8QWVD4TK3GKeiZwcsrgyXT8B3D/9k=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Choices are hard\",\n    \"title\": \"Choices are hard\",\n    \"src\": \"/static/4a516bf3761256bb8e2ad6f85b1b8ae8/18e3b/solutions.jpg\",\n    \"srcSet\": [\"/static/4a516bf3761256bb8e2ad6f85b1b8ae8/46946/solutions.jpg 240w\", \"/static/4a516bf3761256bb8e2ad6f85b1b8ae8/55489/solutions.jpg 480w\", \"/static/4a516bf3761256bb8e2ad6f85b1b8ae8/18e3b/solutions.jpg 960w\", \"/static/4a516bf3761256bb8e2ad6f85b1b8ae8/7e63a/solutions.jpg 1350w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(UnsplashAttribution, {\n    photographer: {\n      name: 'Javier Allegue Barros',\n      url: 'https://unsplash.com/@soymeraki'\n    },\n    mdxType: \"UnsplashAttribution\"\n  }), mdx(\"p\", null, \"Back in 2020 I stumbled over the idea of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://jamstack.org/\"\n  }, \"Jamstack\"), \" applications (\\\"JAM\\\" means JavaScript, APIs and Markup).\\nJamstack promises better performance, higher security, cheap and easy scaling and a better developer experience.\\nTo explain the principle very briefly: You can use a static site generator like \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.gatsbyjs.com/\"\n  }, \"Gatsby.js\"), \"\\nto create static sites from Markdown, JSON, APIs, etc using React. Afterwards, you can deploy your static HTML, CSS and JavaScript\\nto a provider of your choice, e.g. GitHub pages or \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.netlify.com/\"\n  }, \"Netlify\"), \"! If you want to learn more about Jamstack\\nthere are a lot of resources about it out there!\"), mdx(\"p\", null, \"Thinking about the Jamstack approach and my Spotify account I was approaching a new solution. Fortunately, I found that\\nSpotify provides a comprehensive and well documented \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.spotify.com/\"\n  }, \"API\"), \". So, I came up with the idea\\nof developing a web based Jamstack application. It should get the information about the different episodes directly from\\nthe Spotify API and provide a button that will play the episode on Spotify without redirection.\"), mdx(\"h2\", null, \"Episode importer\"), mdx(\"p\", null, \"But first things first. I had to access the Spotify API in order to fetch episode information and create a random\\nplayback button. So, I created a Spotify developer account and generated an API key. With this key in hand, I could use\\nReST to get information about artists and albums. Artists of interest are stored in a small JSON object including their\\nname and Spotify artist id. Then I have created a small Node.js application that fetches all episodes of every artist\\nfrom the configuration object. Each sequence was then saved in JSON format. There ain't no magic in this. Just some\\nReST calls, basic error handling and file I/O.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"451px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"37.916666666666664%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA90lEQVQoz41SyW6DQBTj//+LXJDgwnIAoZSEfQn7KnDjV3U5pKVPsmZ4YPt5GOU4DvwF1tn7PM/RdR2KooDyk/Cqfut/1rquiKIIj8dDRJVpmjDPs6Dve9R1jX3fRWhZli8SPx7HUUAOn9kvyxKmaUJVVXieB4XKt/sdURyLUPxcOTqF6UyBpmkQhqEQfN+HZVkSM0kSEc2yDEEQCBQ6vD03YRhh2zZxrqoKhmFA0zQhpmkK27ah6zocx8HlcsH1ehVzphiGQUyJ78jPlZHZZI9GdOa+bduXkSlGQ4pzGPJPf8pZUYhTu677Efns2vznWjE6j4ln/g6Z1miDy4wzDAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"random-episode-importer\",\n    \"title\": \"random-episode-importer\",\n    \"src\": \"/static/ee2f54830a857b665899b1246422a741/08411/importer.png\",\n    \"srcSet\": [\"/static/ee2f54830a857b665899b1246422a741/5243c/importer.png 240w\", \"/static/ee2f54830a857b665899b1246422a741/08411/importer.png 451w\"],\n    \"sizes\": \"(max-width: 451px) 100vw, 451px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n    \")), mdx(\"p\", null, \"Later I added some more logic to the application. So now only the latest episodes are retrieved and the episode objects\\nare no longer persisted locally, but in a cloud database. \"), mdx(\"p\", null, \"You can see the source files of random-episode-importer on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/thr0n/random-episode-importer\"\n  }, \"GitHub\"), \".\"), mdx(\"h2\", null, \"Episode frontend\"), mdx(\"p\", null, \"Once I finally had the episodes in JSON format as input (without scraping, woohoo!), it was time to set up Gatsby.js.\\nTo get started, I just followed the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.gatsbyjs.com/docs/tutorial/\"\n  }, \"Gatsby tutorial\"), \". In the tutorial you'll\\nwill learn everything you need to know to create UI components, add styling, read JSON files as input, access the\\nimported JSON data using GraphQL, automatically create pages from data and much more.\"), mdx(\"p\", null, \"I started with two GraphQL queries: A list of all artists and a list of all episodes grouped by the artist id. Based\\non this data I created an overview page that shows all artists that have been imported using the episode importer.\\nWith a click on an artist, a random episode determined at the time of rendering is displayed. This works with the help\\nof a page generated specifically for the episode, to which the browser gets redirected. To play the episode on Spotify,\\nyou just need to click on CD cover. Each click on an artist also defines a new random episode for the next run.\\nThis mechanism was implemented quite simply using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Math.random()\"), \" \\uD83D\\uDE48.\"), mdx(\"p\", null, \"Recently, I added an additional page that shows the three latest releases for each artist. This is very handy if you\\ndon't want to miss any new releases of your favorite artist!\\nBut that's not the only feature that I've added. Additionally, there is an Auth0 login form if you want to access\\nrandom episode. This was unfortunately necessary from my point of view, because I don't own the rights to the names\\nand cover images I display in the application \\uD83D\\uDE14. All I can give you is my promise that it is a lot of\\nfun to work with the Spotify API (at least if you're a music lover) and build static websites with Gatsby and React.\"), mdx(\"p\", null, \"Here's a small GIF recording of random episode to give you a hint of the look and feel of the application. On the first\\nscreen, it shows the artist overview as well as a short info text of random episode's purpose. After that, you can\\nsee how clicking on a tile redirects the browser to a random episode for the selected artist:\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"https://github.com/thr0n/random-episode-frontend/raw/master/demo.gif\",\n    \"alt\": \"random-episode showcase\"\n  })), mdx(\"p\", null, \"The source code of random-episode-frontend is also available on\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/thr0n/random-episode-frontend\"\n  }, \"GitHub\"), \".\"), mdx(\"h2\", null, \"Deployment\"), mdx(\"p\", null, \"If you're looking for a way to host a static website, you'll probably come across Netlify fairly quickly.\\nNetlify simplifies the deployment and hosting of a web application (for example developed with Gatsby, Next.js or plain\\nReact, Vue or, Angular) immensely. In the simplest case, Netlify basically only needs access to my Git repository and a\\nsuitable build script. Then a push in the repository is enough to execute a build and a subsequent deployment on Netlify. So I\\ndon't have to worry about DevOps topics or infrastructure components, I just have to write application code. After\\ndeployment, I can reach my app from anywhere there is internet.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"I also created a small script that runs the episode importer and triggers a build on Netlify using a POST request. In this\\nway it's possible to read the latest episode data from the cloud database without pushing to GitHub. To do this, I\\nintegrated an update mechanism into the Netlify build that reads the latest episodes from the database.\"), mdx(\"p\", null, \"Since I added Auth0 login to random episode the application is for my eyes only (and of course the eyes of my wife).\\nBut I can tell you that it's fun to use the app and that it's a good solution to prevent situations I described in the introduction.\\nSo please feel free to fork the repository and setup your own random episode generator!\"), mdx(\"h2\", null, \"Future improvements\"), mdx(\"p\", null, \"The project isn't quite finished yet. There are a few topics on my to do list I'd like to do in the near future:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add an unprotected welcome page, so visitors can get an idea of what is going on at random episode\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Add TypeScript to the episode importer. In my current customer project we use TypeScript and I don't want to miss it anymore\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"At the moment I'm using Firebase as cloud database. I've been reading bad things about it a lot lately, so maybe I'll give\\nBack4App a try\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Finally, I would like to automate the build and deployment on Netlify so that I can always see all the new episodes on Friday.\")), mdx(\"p\", null, \"I hope that you now can't wait to play around with Gatsby, Netlify, or the Spotify API! Thanks for reading!\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"I really love audio dramas, especially  Die drei ???  (\"Three Investigators\").\nAnd I'm not alone with that. The series has now been in…","timeToRead":6,"banner":{"childImageSharp":{"resize":{"src":"/static/3985d8736f57cac9057b8afadbb41a04/a6c62/tapes.jpg"}}}}},"pageContext":{"slug":"/how-to-solve-an-everyday-problem-with-node-js-gatsby-and-netlify","formatString":"DD.MM.YYYY"}},"staticQueryHashes":["3090400250","3090400250","318001574"]}